/* new_folder.c generated by valac UNKNOWN, the Vala compiler
 * generated from new_folder.vala, do not modify */

#include <gtk/gtk.h>
#include <glib-object.h>
#include <glib.h>
#include <glib/gi18n-lib.h>
#include <stdlib.h>
#include <string.h>
#include <gio/gio.h>
#include <gdk-pixbuf/gdk-pixbuf.h>

#define VALA_DEVELOP_TYPE_NEW_FOLDER (vala_develop_new_folder_get_type ())
#define VALA_DEVELOP_NEW_FOLDER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), VALA_DEVELOP_TYPE_NEW_FOLDER, valaDevelopNewFolder))
#define VALA_DEVELOP_NEW_FOLDER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), VALA_DEVELOP_TYPE_NEW_FOLDER, valaDevelopNewFolderClass))
#define VALA_DEVELOP_IS_NEW_FOLDER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), VALA_DEVELOP_TYPE_NEW_FOLDER))
#define VALA_DEVELOP_IS_NEW_FOLDER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), VALA_DEVELOP_TYPE_NEW_FOLDER))
#define VALA_DEVELOP_NEW_FOLDER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), VALA_DEVELOP_TYPE_NEW_FOLDER, valaDevelopNewFolderClass))

typedef struct _valaDevelopNewFolder valaDevelopNewFolder;
typedef struct _valaDevelopNewFolderClass valaDevelopNewFolderClass;
typedef struct _valaDevelopNewFolderPrivate valaDevelopNewFolderPrivate;
enum  {
	VALA_DEVELOP_NEW_FOLDER_0_PROPERTY,
	VALA_DEVELOP_NEW_FOLDER_NUM_PROPERTIES
};
static GParamSpec* vala_develop_new_folder_properties[VALA_DEVELOP_NEW_FOLDER_NUM_PROPERTIES];
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))

#define VALA_DEVELOP_TYPE_OVERVIEW_TREE_STORE (vala_develop_overview_tree_store_get_type ())
#define VALA_DEVELOP_OVERVIEW_TREE_STORE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), VALA_DEVELOP_TYPE_OVERVIEW_TREE_STORE, valaDevelopOverviewTreeStore))
#define VALA_DEVELOP_OVERVIEW_TREE_STORE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), VALA_DEVELOP_TYPE_OVERVIEW_TREE_STORE, valaDevelopOverviewTreeStoreClass))
#define VALA_DEVELOP_IS_OVERVIEW_TREE_STORE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), VALA_DEVELOP_TYPE_OVERVIEW_TREE_STORE))
#define VALA_DEVELOP_IS_OVERVIEW_TREE_STORE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), VALA_DEVELOP_TYPE_OVERVIEW_TREE_STORE))
#define VALA_DEVELOP_OVERVIEW_TREE_STORE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), VALA_DEVELOP_TYPE_OVERVIEW_TREE_STORE, valaDevelopOverviewTreeStoreClass))

typedef struct _valaDevelopOverviewTreeStore valaDevelopOverviewTreeStore;
typedef struct _valaDevelopOverviewTreeStoreClass valaDevelopOverviewTreeStoreClass;
#define _g_free0(var) (var = (g_free (var), NULL))
typedef enum  {
	VALA_DEVELOP_ITEM_TYPE_None = 0,
	VALA_DEVELOP_ITEM_TYPE_Solution = 1,
	VALA_DEVELOP_ITEM_TYPE_Project = 2,
	VALA_DEVELOP_ITEM_TYPE_Resource = 4,
	VALA_DEVELOP_ITEM_TYPE_Source = 8,
	VALA_DEVELOP_ITEM_TYPE_Package = 16,
	VALA_DEVELOP_ITEM_TYPE_Directory = 32,
	VALA_DEVELOP_ITEM_TYPE_Vapi = 64
} valaDevelopItemType;

#define VALA_DEVELOP_TYPE_ITEM_TYPE (vala_develop_item_type_get_type ())
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))

struct _valaDevelopNewFolder {
	GtkDialog parent_instance;
	valaDevelopNewFolderPrivate * priv;
};

struct _valaDevelopNewFolderClass {
	GtkDialogClass parent_class;
};

struct _valaDevelopNewFolderPrivate {
	GtkEntry* folderName;
	GtkButton* create;
	GtkTreeIter _overviewTreeIter;
};

static gint valaDevelopNewFolder_private_offset;
static gpointer vala_develop_new_folder_parent_class = NULL;
extern valaDevelopOverviewTreeStore* vala_develop_main_paned_overviewTreeModel;

GType vala_develop_new_folder_get_type (void) G_GNUC_CONST;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (valaDevelopNewFolder, g_object_unref)
valaDevelopNewFolder* vala_develop_new_folder_new (GtkWidget* parent,
                                                   GtkTreeIter* iter);
valaDevelopNewFolder* vala_develop_new_folder_construct (GType object_type,
                                                         GtkWidget* parent,
                                                         GtkTreeIter* iter);
static void __lambda81_ (valaDevelopNewFolder* self);
static void ___lambda81__gtk_editable_changed (GtkEditable* _sender,
                                        gpointer self);
static void vala_develop_new_folder_OnAccept (valaDevelopNewFolder* self);
GType vala_develop_overview_tree_store_get_type (void) G_GNUC_CONST;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (valaDevelopOverviewTreeStore, g_object_unref)
gchar* vala_develop_overview_tree_store_get_item_path (valaDevelopOverviewTreeStore* self,
                                                       GtkTreeIter* iter);
void vala_develop_overview_tree_store_set_item_name (valaDevelopOverviewTreeStore* self,
                                                     GtkTreeIter* iter,
                                                     const gchar* name);
void vala_develop_overview_tree_store_set_item_type (valaDevelopOverviewTreeStore* self,
                                                     GtkTreeIter* iter,
                                                     gint itemType);
GType vala_develop_item_type_get_type (void) G_GNUC_CONST;
void vala_develop_overview_tree_store_set_item_path (valaDevelopOverviewTreeStore* self,
                                                     GtkTreeIter* iter,
                                                     const gchar* path);
void vala_develop_overview_tree_store_set_item_pixbuf (valaDevelopOverviewTreeStore* self,
                                                       GtkTreeIter* iter,
                                                       GdkPixbuf* itemPixbuf);
static void _vala_develop_new_folder_OnAccept_gtk_button_clicked (GtkButton* _sender,
                                                           gpointer self);
static void vala_develop_new_folder_OnCancel (valaDevelopNewFolder* self);
static void _vala_develop_new_folder_OnCancel_gtk_button_clicked (GtkButton* _sender,
                                                           gpointer self);
static void vala_develop_new_folder_finalize (GObject * obj);

static inline gpointer
vala_develop_new_folder_get_instance_private (valaDevelopNewFolder* self)
{
	return G_STRUCT_MEMBER_P (self, valaDevelopNewFolder_private_offset);
}

static void
__lambda81_ (valaDevelopNewFolder* self)
{
	GtkButton* _tmp0_;
	GtkEntry* _tmp1_;
	const gchar* _tmp2_;
	const gchar* _tmp3_;
	_tmp0_ = self->priv->create;
	_tmp1_ = self->priv->folderName;
	_tmp2_ = gtk_entry_get_text (_tmp1_);
	_tmp3_ = _tmp2_;
	gtk_widget_set_sensitive ((GtkWidget*) _tmp0_, g_strcmp0 (_tmp3_, "") != 0);
}

static void
___lambda81__gtk_editable_changed (GtkEditable* _sender,
                                   gpointer self)
{
	__lambda81_ ((valaDevelopNewFolder*) self);
}

valaDevelopNewFolder*
vala_develop_new_folder_construct (GType object_type,
                                   GtkWidget* parent,
                                   GtkTreeIter* iter)
{
	valaDevelopNewFolder * self = NULL;
	GtkWidget* _tmp0_;
	GtkTreeIter _tmp1_;
	GtkEntry* _tmp2_;
	GtkButton* _tmp3_;
	GtkButton* _tmp4_;
	g_return_val_if_fail (parent != NULL, NULL);
	g_return_val_if_fail (iter != NULL, NULL);
	self = (valaDevelopNewFolder*) g_object_new (object_type, NULL);
	_tmp0_ = gtk_widget_get_toplevel (parent);
	gtk_window_set_transient_for ((GtkWindow*) self, G_TYPE_CHECK_INSTANCE_CAST (_tmp0_, gtk_window_get_type (), GtkWindow));
	gtk_window_set_title ((GtkWindow*) self, _ ("New folder"));
	gtk_dialog_set_default_response ((GtkDialog*) self, (gint) GTK_RESPONSE_ACCEPT);
	_tmp1_ = *iter;
	self->priv->_overviewTreeIter = _tmp1_;
	_tmp2_ = self->priv->folderName;
	g_signal_connect_object ((GtkEditable*) _tmp2_, "changed", (GCallback) ___lambda81__gtk_editable_changed, self, 0);
	gtk_widget_show_all ((GtkWidget*) self);
	_tmp3_ = self->priv->create;
	gtk_widget_set_can_default ((GtkWidget*) _tmp3_, TRUE);
	_tmp4_ = self->priv->create;
	g_object_set ((GtkWidget*) _tmp4_, "has-default", TRUE, NULL);
	return self;
}

valaDevelopNewFolder*
vala_develop_new_folder_new (GtkWidget* parent,
                             GtkTreeIter* iter)
{
	return vala_develop_new_folder_construct (VALA_DEVELOP_TYPE_NEW_FOLDER, parent, iter);
}

static void
vala_develop_new_folder_OnAccept (valaDevelopNewFolder* self)
{
	GError* _inner_error0_ = NULL;
	g_return_if_fail (self != NULL);
	{
		GtkTreeIter newIter = {0};
		valaDevelopOverviewTreeStore* _tmp0_;
		GtkTreeIter _tmp1_;
		GtkTreeIter _tmp2_ = {0};
		gchar* filePath = NULL;
		valaDevelopOverviewTreeStore* _tmp3_;
		GtkTreeIter _tmp4_;
		gchar* _tmp5_;
		GFile* newPath = NULL;
		const gchar* _tmp6_;
		GFile* _tmp7_;
		GFile* _tmp8_;
		GtkEntry* _tmp9_;
		const gchar* _tmp10_;
		const gchar* _tmp11_;
		GFile* _tmp12_;
		GFile* _tmp13_;
		GFile* _tmp14_;
		valaDevelopOverviewTreeStore* _tmp15_;
		GtkTreeIter _tmp16_;
		GtkEntry* _tmp17_;
		const gchar* _tmp18_;
		const gchar* _tmp19_;
		valaDevelopOverviewTreeStore* _tmp20_;
		GtkTreeIter _tmp21_;
		valaDevelopOverviewTreeStore* _tmp22_;
		GtkTreeIter _tmp23_;
		const gchar* _tmp24_;
		gchar* _tmp25_;
		gchar* _tmp26_;
		GtkEntry* _tmp27_;
		const gchar* _tmp28_;
		const gchar* _tmp29_;
		gchar* _tmp30_;
		gchar* _tmp31_;
		GdkPixbuf* _tmp32_ = NULL;
		GdkPixbuf* _tmp33_;
		valaDevelopOverviewTreeStore* _tmp34_;
		GtkTreeIter _tmp35_;
		GdkPixbuf* _tmp36_;
		GdkPixbuf* _tmp37_;
		_tmp0_ = vala_develop_main_paned_overviewTreeModel;
		_tmp1_ = self->priv->_overviewTreeIter;
		gtk_tree_store_append ((GtkTreeStore*) _tmp0_, &_tmp2_, &_tmp1_);
		newIter = _tmp2_;
		_tmp3_ = vala_develop_main_paned_overviewTreeModel;
		_tmp4_ = self->priv->_overviewTreeIter;
		_tmp5_ = vala_develop_overview_tree_store_get_item_path (_tmp3_, &_tmp4_);
		filePath = _tmp5_;
		_tmp6_ = filePath;
		_tmp7_ = g_file_new_for_path (_tmp6_);
		_tmp8_ = _tmp7_;
		_tmp9_ = self->priv->folderName;
		_tmp10_ = gtk_entry_get_text (_tmp9_);
		_tmp11_ = _tmp10_;
		_tmp12_ = g_file_get_child (_tmp8_, _tmp11_);
		_tmp13_ = _tmp12_;
		_g_object_unref0 (_tmp8_);
		newPath = _tmp13_;
		_tmp14_ = newPath;
		g_file_make_directory (_tmp14_, NULL, &_inner_error0_);
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
			_g_object_unref0 (newPath);
			_g_free0 (filePath);
			goto __catch55_g_error;
		}
		_tmp15_ = vala_develop_main_paned_overviewTreeModel;
		_tmp16_ = newIter;
		_tmp17_ = self->priv->folderName;
		_tmp18_ = gtk_entry_get_text (_tmp17_);
		_tmp19_ = _tmp18_;
		vala_develop_overview_tree_store_set_item_name (_tmp15_, &_tmp16_, _tmp19_);
		_tmp20_ = vala_develop_main_paned_overviewTreeModel;
		_tmp21_ = newIter;
		vala_develop_overview_tree_store_set_item_type (_tmp20_, &_tmp21_, (gint) VALA_DEVELOP_ITEM_TYPE_Directory);
		_tmp22_ = vala_develop_main_paned_overviewTreeModel;
		_tmp23_ = newIter;
		_tmp24_ = filePath;
		_tmp25_ = g_strconcat (_tmp24_, "/", NULL);
		_tmp26_ = _tmp25_;
		_tmp27_ = self->priv->folderName;
		_tmp28_ = gtk_entry_get_text (_tmp27_);
		_tmp29_ = _tmp28_;
		_tmp30_ = g_strconcat (_tmp26_, _tmp29_, NULL);
		_tmp31_ = _tmp30_;
		vala_develop_overview_tree_store_set_item_path (_tmp22_, &_tmp23_, _tmp31_);
		_g_free0 (_tmp31_);
		_g_free0 (_tmp26_);
		_tmp33_ = gdk_pixbuf_new_from_resource ("/valaDevelop/folder.svg.png", &_inner_error0_);
		_tmp32_ = _tmp33_;
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
			_g_object_unref0 (newPath);
			_g_free0 (filePath);
			goto __catch55_g_error;
		}
		_tmp34_ = vala_develop_main_paned_overviewTreeModel;
		_tmp35_ = newIter;
		_tmp36_ = gdk_pixbuf_scale_simple (_tmp32_, 16, 16, GDK_INTERP_BILINEAR);
		_tmp37_ = _tmp36_;
		vala_develop_overview_tree_store_set_item_pixbuf (_tmp34_, &_tmp35_, _tmp37_);
		_g_object_unref0 (_tmp37_);
		_g_object_unref0 (_tmp32_);
		_g_object_unref0 (newPath);
		_g_free0 (filePath);
	}
	goto __finally55;
	__catch55_g_error:
	{
		GError* e = NULL;
		GtkMessageDialog* messagedialog = NULL;
		GError* _tmp38_;
		const gchar* _tmp39_;
		GtkMessageDialog* _tmp40_;
		GtkMessageDialog* _tmp41_;
		GtkMessageDialog* _tmp42_;
		e = _inner_error0_;
		_inner_error0_ = NULL;
		_tmp38_ = e;
		_tmp39_ = _tmp38_->message;
		_tmp40_ = (GtkMessageDialog*) gtk_message_dialog_new ((GtkWindow*) self, GTK_DIALOG_MODAL, GTK_MESSAGE_ERROR, GTK_BUTTONS_OK, "%s", _tmp39_);
		g_object_ref_sink (_tmp40_);
		messagedialog = _tmp40_;
		_tmp41_ = messagedialog;
		gtk_dialog_run ((GtkDialog*) _tmp41_);
		_tmp42_ = messagedialog;
		gtk_widget_destroy ((GtkWidget*) _tmp42_);
		_g_object_unref0 (messagedialog);
		_g_error_free0 (e);
		return;
	}
	__finally55:
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
		g_clear_error (&_inner_error0_);
		return;
	}
	gtk_dialog_response ((GtkDialog*) self, (gint) GTK_RESPONSE_ACCEPT);
}

static void
_vala_develop_new_folder_OnAccept_gtk_button_clicked (GtkButton* _sender,
                                                      gpointer self)
{
	vala_develop_new_folder_OnAccept ((valaDevelopNewFolder*) self);
}

static void
vala_develop_new_folder_OnCancel (valaDevelopNewFolder* self)
{
	g_return_if_fail (self != NULL);
	gtk_dialog_response ((GtkDialog*) self, (gint) GTK_RESPONSE_CANCEL);
}

static void
_vala_develop_new_folder_OnCancel_gtk_button_clicked (GtkButton* _sender,
                                                      gpointer self)
{
	vala_develop_new_folder_OnCancel ((valaDevelopNewFolder*) self);
}

static void
vala_develop_new_folder_class_init (valaDevelopNewFolderClass * klass,
                                    gpointer klass_data)
{
	vala_develop_new_folder_parent_class = g_type_class_peek_parent (klass);
	g_type_class_adjust_private_offset (klass, &valaDevelopNewFolder_private_offset);
	G_OBJECT_CLASS (klass)->finalize = vala_develop_new_folder_finalize;
	gtk_widget_class_set_template_from_resource (GTK_WIDGET_CLASS (klass), "/valaDevelop/newFolder.glade");
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "folderName", FALSE, valaDevelopNewFolder_private_offset + G_STRUCT_OFFSET (valaDevelopNewFolderPrivate, folderName));
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "create", FALSE, valaDevelopNewFolder_private_offset + G_STRUCT_OFFSET (valaDevelopNewFolderPrivate, create));
	gtk_widget_class_bind_template_callback_full (GTK_WIDGET_CLASS (klass), "OnAccept", G_CALLBACK(_vala_develop_new_folder_OnAccept_gtk_button_clicked));
	gtk_widget_class_bind_template_callback_full (GTK_WIDGET_CLASS (klass), "OnCancel", G_CALLBACK(_vala_develop_new_folder_OnCancel_gtk_button_clicked));
}

static void
vala_develop_new_folder_instance_init (valaDevelopNewFolder * self,
                                       gpointer klass)
{
	self->priv = vala_develop_new_folder_get_instance_private (self);
	gtk_widget_init_template (GTK_WIDGET (self));
}

static void
vala_develop_new_folder_finalize (GObject * obj)
{
	valaDevelopNewFolder * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, VALA_DEVELOP_TYPE_NEW_FOLDER, valaDevelopNewFolder);
	_g_object_unref0 (self->priv->folderName);
	_g_object_unref0 (self->priv->create);
	G_OBJECT_CLASS (vala_develop_new_folder_parent_class)->finalize (obj);
}

GType
vala_develop_new_folder_get_type (void)
{
	static volatile gsize vala_develop_new_folder_type_id__volatile = 0;
	if (g_once_init_enter (&vala_develop_new_folder_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (valaDevelopNewFolderClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) vala_develop_new_folder_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (valaDevelopNewFolder), 0, (GInstanceInitFunc) vala_develop_new_folder_instance_init, NULL };
		GType vala_develop_new_folder_type_id;
		vala_develop_new_folder_type_id = g_type_register_static (gtk_dialog_get_type (), "valaDevelopNewFolder", &g_define_type_info, 0);
		valaDevelopNewFolder_private_offset = g_type_add_instance_private (vala_develop_new_folder_type_id, sizeof (valaDevelopNewFolderPrivate));
		g_once_init_leave (&vala_develop_new_folder_type_id__volatile, vala_develop_new_folder_type_id);
	}
	return vala_develop_new_folder_type_id__volatile;
}

